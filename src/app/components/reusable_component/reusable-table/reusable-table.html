<div class="container-fluid mt-4">
  <div class="card shadow-sm border-0 rounded-3">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="bg-light">
            <tr>
              @for (col of columnas; track col.key) {
                <th class="px-4 py-3 text-secondary text-uppercase fw-bold" style="font-size: 0.85rem;">
                  {{ col.label }}
                </th>
              }
            </tr>
          </thead>

          <tbody>
            @for (fila of pageActual(); track $index) {
              <tr class="table-row" (click)="onFilaClick(fila)" style="cursor: pointer">
                @for (col of columnas; track col.key) {
                  <td class="px-4 py-3">
                    @switch (col.key) {
                      
                      @case ('estadoActivo') {
                        <span 
                          class="badge rounded-pill px-3 py-2"
                          [ngClass]="fila.estadoActivo ? 'bg-success-subtle text-success' : 'bg-danger-subtle text-danger'"
                          (click)="OnToggleActivo(fila, $event)">
                          {{ fila.estadoActivo ? 'Activo' : 'Inactivo' }}
                        </span>
                      }

                      @case ('action') {
                        <div class="d-flex gap-2" (click)="$event.stopPropagation()">
                          <button class="btn btn-outline-warning btn-sm border-0" 
                                  title="Editar" (click)="OnEditClick(fila)">
                            <i class="bi bi-pencil-square"></i>
                          </button>
                          <button class="btn btn-outline-danger btn-sm border-0" 
                                  title="Eliminar" (click)="onEliminarClick(fila)">
                            <i class="bi bi-trash3-fill"></i>
                          </button>
                        </div>
                      }

                      @default {
                        <span class="text-dark">{{ fila[col.key] }}</span>
                      }
                    }
                  </td>
                }
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>

    <div class="card-footer bg-white border-top-0 py-3">
      <nav class="d-flex justify-content-between align-items-center">
        <small class="text-muted">
          Mostrando p√°gina {{page}} de {{totalPaginas()}}
        </small>
        <ul class="pagination pagination-sm mb-0">
          <li class="page-item" [class.disabled]="page === 1">
            <button class="page-link shadow-none" (click)="setPage(page - 1)">Anterior</button>
          </li>
          
          @for (p of [].constructor(totalPaginas()); track $index) {
            <li class="page-item" [class.active]="page === ($index + 1)">
              <button class="page-link shadow-none" (click)="setPage($index + 1)">
                {{ $index + 1 }}
              </button>
            </li>
          }

          <li class="page-item" [class.disabled]="page === totalPaginas()">
            <button class="page-link shadow-none" (click)="setPage(page + 1)">Siguiente</button>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>